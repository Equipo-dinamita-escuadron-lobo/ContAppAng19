<!-- Contenedor Principal con la fuente y fondo estandarizados -->
<div class="flex w-full h-full font-titillium">
  <!-- Tarjeta de Contenido Principal, aplicando el estilo de la guía -->
  <div class="m-4 md:m-10 w-full font-medium bg-white rounded-2xl md:rounded-3xl p-6 md:p-10">

    <!-- 1. CABECERA: Título y Botón de Regreso -->
    <div class="flex justify-between items-start mb-12">
      <!-- Título con el estilo de marca -->
      <div class="items-center">
        <h1 class="font-family-titillium font-bold text-3xl/41 text-primary border-b-4 border-secondary inline-block pb-1">
          Editar Unidad de Medida
        </h1>
        <p class="font-family-sans font-normal text-sm mt-2">
          Modifique la información de la unidad de medida según sea necesario.
        </p>
      </div>

      <!-- Botón de Regreso -->
      <div class="hidden sm:block">
        <p-button 
          icon="pi pi-arrow-left" 
          (click)="goBack()" 
          styleClass="p-button-text p-button-secondary">
        </p-button>
      </div>
    </div>

    <!-- 2. INDICADOR DE CARGA -->
    @if (isLoading) {
    <div class="flex justify-center items-center py-20">
      <i class="pi pi-spin pi-spinner text-primary" style="font-size: 2rem"></i>
      <p class="ml-3 text-primary font-family-sans">Cargando información de la unidad de medida...</p>
    </div>
    } @else {

    <!-- 3. FORMULARIO DE EDICIÓN DE UNIDAD DE MEDIDA -->
    <form [formGroup]="unitOfMeasureForm" (ngSubmit)="onSubmit()">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-5 font-family-sans">

        <!-- Nombre de la Unidad -->
        <div class="flex flex-col gap-2">
          <label for="name" class="font-semibold text-primary">Nombre de la Unidad</label>
          <input pInputText id="name" formControlName="name" placeholder="Ej: Kilogramo"
            class="w-full md:w-2/3" />
          @if (hasFieldError('name')) {
          <small class="text-red-500">{{ getFieldError('name') }}</small>
          }
        </div>

        <!-- Abreviatura -->
        <div class="flex flex-col gap-2">
          <label for="abbreviation" class="font-semibold text-primary">Abreviatura</label>
          <input pInputText id="abbreviation" formControlName="abbreviation" placeholder="Ej: Kg"
            class="w-full md:w-2/3" />
          @if (hasFieldError('abbreviation')) {
          <small class="text-red-500">{{ getFieldError('abbreviation') }}</small>
          }
        </div>

        <!-- Descripción -->
        <div class="flex flex-col gap-2 md:col-span-2">
          <label for="description" class="font-semibold text-primary">Descripción</label>
          <input pInputText id="description" formControlName="description" 
            placeholder="Ej: Unidad de medida de masa utilizada para pesar productos"
            class="w-full md:w-4/5" />
          @if (hasFieldError('description')) {
          <small class="text-red-500">{{ getFieldError('description') }}</small>
          }
        </div>

      </div>

      <!-- 4. BOTONES DE ACCIÓN -->
      <div class="flex justify-end gap-4 mt-12 pt-40">
        <p-button 
          type="button"
          label="Cancelar" 
          severity="secondary"
          (onClick)="goBack()">
        </p-button>
        <p-button 
          type="submit"
          label="Guardar Cambios"
          [disabled]="unitOfMeasureForm.invalid || !hasChanges()">
        </p-button>
      </div>
    </form>

    }
  </div>
</div>
