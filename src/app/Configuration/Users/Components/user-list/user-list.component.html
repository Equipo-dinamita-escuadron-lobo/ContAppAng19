<div class="flex w-full h-full font-titillium">
  <div class="w-full px-4 sm:px-6 lg:px-8">
    <!-- Header Section -->
    <div
      class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4 mb-8"
    >
      <div class="flex-1">
        <h1
          class="text-2xl md:text-3xl font-bold text-[var(--color-primary)] underline decoration-[var(--color-secondary)] mb-3"
        >
          Gestión de usuarios
        </h1>
        <p class="text-sm sm:text-base text-gray-600 max-w-3xl leading-relaxed">
          Aquí podrá ver la lista de usuarios.
        </p>
      </div>
    </div>

    <!-- Actions Bar -->
    <div class="mb-6">
      <div
        class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 p-4 bg-white rounded-lg shadow-sm border border-gray-200"
      >
        <!-- Search Field and Add User Button -->
        <div class="flex items-center gap-2 w-full sm:w-auto">
          <!-- Search Field -->
          <p-iconfield iconPosition="left" class="w-full sm:w-72">
            <p-inputicon>
              <i class="pi pi-search"></i>
            </p-inputicon>
            <input
              pInputText
              type="text"
              placeholder="Buscar usuarios..."
              class="w-full"
            />
          </p-iconfield>

          <!-- Add User Button
          <p-button
            label="Agregar Usuario"
            icon="pi pi-plus"
            class="p-button-success"
            (onClick)="redirectTo('/users/create')"
            size="small"
          ></p-button> -->
        </div>
      </div>
    </div>

    <!-- Table Container -->
    <div
      class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"
    >
      <p-table
        #dt1
        [value]="users"
        dataKey="id"
        [paginator]="true"
        [rows]="10"
        [rowsPerPageOptions]="[10, 25, 50, 100]"
        [responsiveLayout]="'scroll'"
        styleClass="p-datatable-sm"
        [tableStyle]="{ 'min-width': '50rem' }"
        [loading]="loading"
      >
        <!-- Table Header -->
        <ng-template pTemplate="header">
          <tr>
            <th class="whitespace-nowrap">
              <span>Nombre</span>
            </th>
            <th class="whitespace-nowrap">
              <span>Apellido</span>
            </th>

            <th class="whitespace-nowrap">
              <span>Correo</span>
            </th>
            <th class="whitespace-nowrap">
              <span>Usuario</span>
            </th>

            <th class="whitespace-nowrap">
              <span>Roles</span>
            </th>
            <th class="whitespace-nowrap text-center">
              <span>Acciones</span>
            </th>
          </tr>
        </ng-template>

        <!-- Table Body -->
        <ng-template pTemplate="body" let-user>
          <tr class="hover:bg-gray-50">
            <td class="whitespace-nowrap">
              <span class="text-sm text-gray-900">
                {{ user.firstName }}
              </span>
            </td>
            <td class="whitespace-nowrap">
              <span class="text-sm text-gray-900">{{ user.lastName }}</span>
            </td>
            <td class="whitespace-nowrap">
              <span class="text-sm text-gray-900">{{ user.email }}</span>
            </td>
            <td class="whitespace-nowrap">
              <span class="text-sm text-gray-900">{{ user.username }}</span>
            </td>

            <td class="whitespace-nowrap">
              <div class="flex flex-col gap-1">
                <span
                  *ngFor="let role of user.roles"
                  class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
                >
                  {{ role }}
                </span>
              </div>
            </td>
            <td class="whitespace-nowrap">
              <div class="flex items-center justify-center gap-2">
                <p-button
                  icon="pi pi-pencil"
                  class="p-button-text p-button-sm"
                  (onClick)="redirectToEdit(user.id)"
                  pTooltip="Editar"
                  tooltipPosition="top"
                ></p-button>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
